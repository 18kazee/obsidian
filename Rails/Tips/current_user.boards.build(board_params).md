
### アソシエーションで関連したオブジェクトの初期化

```ruby
# GOOD アソシエーションを活用
@board = current_user.boards.build(board_params)

# BAD 初期化した後に値を代入
@board = Board.new(board_params)
@board.user_id = current_user.id

# BAD 初期化する際のパラメータをmerge
Board.new(board_params.merge(user_id: current_user.id))
```

モデルに [[has_many]]:boards を設定することで、userオブジェクトで boards というメソッドが使えるようになり、`current_user.boards.new` と実行することで、user_idを登録したboardオブジェクトを初期化できます。また、newの引数にパラメータを渡すことで入力フォームから渡ってきた情報のオブジェクトが作成できます。


***このように、アソシエーションで関連したオブジェクトを初期化する際は、通常の初期化と区別して new ではなく build と記載することがあります。（build は new のエイリアスのため、どちらで記載しても挙動は変わりません）***


以上の記法は開発現場では当たり前のように使われているため、開発者としてはこの記載に慣れておく必要があります。この記載を知らなければBADで紹介したように オブジェクトを初期化してから必要なデータを代入したり、引数のパラメータ情報のmergeなどが必要になります。


「掲示板のオブジェクトを初期化する」「初期化したオブジェクトにログインユーザーのIDを登録する」と2行に分かれた情報を理解させるより、「ログインユーザーに関連した掲示板のオブジェクトを作成する」と記載した方が読み手に取ってのコードの理解が早くなります。このように1行で記載することで、全体のコード量が削減されるので、他のより重要な処理の記載に集中できるようになるメリットがあります。パラメータに merge することで1行でも記載できますが、アソシエーションで関連しているオブジェクトであることを強調した方が良いです。（＊ モデルにアソシエーションの関連性がない情報を登録する場合は、mergeを使って短く記載することが可能です）


