
# [](https://esa-pages.io/p/sharing/2315/posts/17724/6caea739dd14c23ab0fc.html#redis)redis

## 応用編で利用したRedisとは何ですか？どのような処理で利用しますか？

-   キーバリュー型のNoSQLデータベース
-   Read/Writeが速くて高パフォーマンス
-   ActiveJobの保存場所に使ったり
-   キャッシュの保存場所に使ったり
-   セッションの保存場所に使ったり

高度な話なので初学者は深掘りしなくても良いお話しです。概要だけ掴んでおけばOKです。  
[Rails のキャッシュ機構 - Railsガイド](https://railsguides.jp/caching_with_rails.html)

# ジョブ

## ActiveJobはどんなケースで使いますか？

-   バックグラウンドで実行させる非同期処理に利用します。ユーザーがリアルタイムで実行結果を期待しない処理をキューとして登録して裏側で実行します。
    -   具体的には、請求書発行やメール送信、集計したデータのCSV出力など、ある程度時間がかかる重たい処理をJobとして非同期で実行することが多いです。

[Active Job の基礎 - Railsガイド](https://railsguides.jp/active_job_basics.html)

---

# rakeタスク

## rakeタスクはどのような処理で利用しますか？

-   Rubyで記載できる特定の処理を実行したい場合に使用します。
    
-   ブラウザなどの一般ユーザーに対するインターフェイスは実装されないですが、開発者は利用したい処理を定義して実行できます。  
    （具体的にはCSVファイルのインポート・DBに保存されているデータの一括編集などがあります。）
    
-   ターミナルなどのコマンドラインから実行したり、cronを用いて定義した処理を自動で実行させることができます。
    

# FatControllerの解消

## FatControllerとはどのようなものですか？  
また、どのように解消しますか？

-   controllerに処理を書きすぎて、コードが読みにくくなること。
    
-   各アクションの中の記述が多く行数全体が肥大化したコントローラを、アンチパターンとして太ったコントローラ（FatController）と呼びます。
    
-   そのコントローラの責務を超えた処理をコントローラ内で行っている状態が多いです。
    
    -   独自のアクションを別途Controllerを作って分割したり、ModelやHelper、Decoratorなどにメソッドを切り出して処理を分けるなどの対応が望ましいです。
    -   例：意味のあるまとまり(sessionなど)で、新しいコントローラーの作成とルーティング設定を行う。（UsersControllerからsession関連を取り除き、新たにSessionsControllerの作成、routes.rbにresource :sessionsを追記）
    -   メソッドの書き方の改善、Controllerの分割、Helper,Model,Decoratorへのメソッドの移動で解消しましょう。

# form object

## form objectはどのような時に利用しますか？

-   抽象的な表現をすると、ActiveRecordは使いたくないが、純粋なRubyのみでゼロから実装すると大変なので、ActiveRecordの一部の機能だけを使いたい場合
-   具体的な表現をすると、
    -   一回のフォームの送信で親子関係にあるモデルを同時に作成したい時
    -   一回のフォームの送信で複数のレコードを同時に作成したい時
    -   モデルと1対1で対応しないフォーム

# トランザクションとは？なぜ使うのか？

## transactionってどのようなケースで使いますか

-   データに矛盾が生じないようにするために使う
-   いくつかの処理を**一まとめとして扱い**、うち一つでも処理が失敗した場合に**全ての処理をなかったことにする**。途中で中断されてしまった場合に不具合が生じるような作業に使用する。（例：銀行の振り込みで、「1.A口座から減額 → 2.B口座を増額」という処理がある場合、1は正常に行われたがBは失敗、しかしそのまま作業が完了、となると整合性が取れなくなる）
-   ロールバックという言葉がキーワードなので覚えておきましょう。

現場Railsの特典PDFにも記載があるので読んでみましょう。  
[『現場で使える Ruby on Rails 5速習実践ガイド』特典PDF_1024.indd](https://book.mynavi.jp/files/user/support/9784839962227/spe_con/Ruby_on_Rails5_sokushu_jissen_special.pdf)